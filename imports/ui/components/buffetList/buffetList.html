<md-content class="buffet">
    <form name="buffetDescriptionForm" layout="column" layout-fill layout-padding layout-margin>
        <div flex aria-label="description">
            <p> {{buffetList.buffetObject.description}}</p>
        </div>
    </form>

    <md-list md-whiteframe="3">
        <md-subheader class="md-sticky">
            <div layout="column">
                <div layout="row">
                    <span flex="5"></span>
                    <span flex="75"><h5 align="center">Dish List</h5></span>
                    <md-button ng-hide="buffetList.showAddForm" class="material-icons md-fab md-mini addDish"
                               ng-click="buffetList.openForm()"> add</md-button>
                    <md-button ng-show="buffetList.showAddForm" class="material-icons md-fab md-mini addDish"
                               ng-click="buffetList.openForm()"> close</md-button>
                </div>
                <div layout="row">
                    <span flex="10"></span>
                    <span flex="30">
                        <p>Dish</p>
                    </span>
                    <span flex="20" align="center">
                        <p>Cook</p>
                    </span>
                </div>
            </div>
        </md-subheader>

        <form ng-if="buffetList.showAddForm" md-whiteframe>
            <div layout="row">
                <md-input-container class="md-block" flex="40">
                    <label>Dish:</label>
                    <textarea type="text" ng-model="buffetList.dish.name"></textarea>
                </md-input-container>
                <div class="md-block" flex="10"></div>
                <md-input-container class="md-block" flex="40">
                    <label>Cook:</label>
                    <textarea type="text" ng-model="buffetList.dish.cook"></textarea>
                </md-input-container>
            </div>
            <div layout="row">
                <md-input-container class="md-block" flex="65">
                    <label>Additional Text:</label>
                    <textarea type="text" ng-model="buffetList.dish.description"></textarea>
                </md-input-container>
            </div>
            <div layout="row">
                <md-button flex="100" align="center" ng-click="buffetList.submit()" class="md-raised add">Add Dish</md-button>
            </div>
        </form>

        <div flex class="listItems" aria-label="dishes">
            <md-list-item class="md-2-line" ng-repeat="dish in buffetList.dishList"
                          ng-mouseover="buffetList.selectDish(dish)" ng-mouseleave="buffetList.deselectDish()">
                <div class="md-list-item-text">
                    <div layout="row" class="rows">
                        <span flex="10"></span>
                        <div flex="30">
                            <h3 class="textItems" ng-hide="(dish._id == buffetList.editDish.id) &&
                            !(buffetList.editDish.name == '') " ng-click="buffetList.editDishName(dish)" > {{dish.name}}</h3>
                            <form class="textItems" ng-show="(dish._id == buffetList.editDish.id) &&
                            !(buffetList.edit.Dish.name == '')" ng-submit="buffetList.saveDishName()" >
                                <input type="text" placeholder={{buffetList.editDish.name}} ng-model="buffetList.editDish.name"/>
                            </form>
                        </div>
                        <span flex="5"></span>
                        <span flex="30">
                            <p class="textItems" ng-hide="(dish._id == buffetList.editDish.id) &&
                            !(buffetList.editDish.cook == '') " ng-click="buffetList.editDishCook(dish)" > {{dish.cook}}</p>
                            <form class="textItems" ng-show="(dish._id == buffetList.editDish.id) &&
                            !(buffetList.edit.Dish.cook == '')" ng-submit="buffetList.saveDishCook()" >
                                <input type="text" placeholder={{buffetList.editDish.cook}} ng-model="buffetList.editDish.cook"/>
                            </form>
                        </span>
                        <span flex="25" align="end">
                            <md-button class="material-icons md-icon-button dish-delete" ng-show="buffetList.selectedDishId == dish._id"
                                       ng-click="buffetList.deleteDish(dish)"> delete</md-button>
                        </span>
                    </div>
                    <div>
                        <p class="description" ng-if="buffetList.selectedDishId == dish._id" ng-hide="(dish._id == buffetList.editDish.id)
                        && !(buffetList.editDish.description == '')" ng-click="buffetList.editDishDescription(dish)"> {{dish.description}}</p>
                        <form class="description" ng-if="buffetList.selectedDishId == dish._id" ng-show="(dish._id == buffetList.editDish.id)
                        && !(buffetList.editDish.description == '')" ng-submit="buffetList.saveDishDescription()" >
                            <input class="description" type="text" placeholder={{buffetList.editDish.description}} ng-model="buffetList.editDish.description"/>
                        </form>
                    </div>
                </div>
                <md-divider ng-if="!$last"></md-divider>
            </md-list-item>
        </div>
    </md-list>
</md-content>

